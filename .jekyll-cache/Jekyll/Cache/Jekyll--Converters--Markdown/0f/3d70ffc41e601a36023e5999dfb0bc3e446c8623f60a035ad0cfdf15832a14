I"h<!--more-->

<!-- CreateTime:2018/2/13 17:23:03 -->

<div id="toc"></div>

<p>微软自带的地图很简单</p>

<p>第一步引用地图<code class="language-plaintext highlighter-rouge">xmlns:Map="using:Windows.UI.Xaml.Controls.Maps"</code></p>

<p>这段代码写在<code class="language-plaintext highlighter-rouge">&lt;Page&gt;</code></p>

<p>然后在<code class="language-plaintext highlighter-rouge">Grid</code> 用 Map 来得到 MapControl
<code class="language-plaintext highlighter-rouge">&lt;Map:MapControl /&gt;</code></p>

<p>尝试运行</p>

<p><img src="http://img.blog.csdn.net/20151119220140568" alt="MapControl" /></p>

<p>提示 警告：未指定MapServiceToken</p>

<p>在功能选位置功能
<img src="http://img.blog.csdn.net/20151119220447500" alt="这里写图片描述" /></p>

<p>要获得位置需要权限</p>

<p><img src="http://img.blog.csdn.net/20151119222529424" alt="获得权限" /></p>

<p>为了获得位置，写一个按钮点击获得位置</p>

<p>MainPage.xaml.cs</p>

<pre><code class="language-C#">            //需要using Windows.Devices.Geolocation;
            var access = await Windows.Devices.Geolocation.Geolocator.RequestAccessAsync();
            switch (access)
            {
                case GeolocationAccessStatus.Unspecified:
                    //定位未开启提示是否跳转到 设置 页面            
                    return;
                case GeolocationAccessStatus.Allowed:           //允许获取          
                    break;
                case GeolocationAccessStatus.Denied:            //不允许获取位置信息时 给予提示 然后根据情况选择是否跳转到 设置 界面           
                    await Windows.System.Launcher.LaunchUriAsync(new Uri("ms-settings://privacy/location"));
                    return;
                default:
                    break;
            }
            var gt = new Geolocator();
            var position = await gt.GetGeopositionAsync();  //以前的position.Coordinate.Latitude 方法在UWP中已经过时，不再推荐使用    
                                                            //var latiude = position.Coordinate.Latitude;   
            map.Center = position.Coordinate.Point;
            map.ZoomLevel = 10;            
</code></pre>

<p>因为 map.Center 说的是 Geopoint，王陈染大神说的是<code class="language-plaintext highlighter-rouge">position = await gt.GetGeopositionAsync();</code>类型是Geoposition，结果错误是出现了</p>
<blockquote>
  <p>无法将类型“Windows.Devices.Geolocation.Geoposition”隐式转换为“Windows.Devices.Geolocation.Geopoint”  appButtonBar</p>
</blockquote>

<p>正确的代码 <code class="language-plaintext highlighter-rouge">map.Center = position.Coordinate.Point;</code></p>

<p>点击就把地图中心设置在用户位置</p>

<p>参考：http://www.wangchenran.com</p>

:ET
I"<p>微软的ContentDialog不是一直有，而是UWP新的，可以使用Content放用户控件，使用很好，但是一点不好的是，默认的一点击下面按钮就会退出。</p>

<!--more-->

<!-- CreateTime:2018/2/13 17:23:03 -->

<div id="toc"></div>

<p>我们有时候需要ContentDialog用户输入，而用户没有输入我们想要的，给用户提示，不退出</p>

<p>那么要解决ContentDialog自动退出有两个方法：</p>

<p>第一个很简单，第二个更简单</p>

<p>简单的方法，做一个类继承ContentDialog，然后加一个属性</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 对话完成，如果没有完成会继续显示</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">Complete</span>
        <span class="p">{</span>
            <span class="k">set</span><span class="p">;</span>
            <span class="k">get</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>在Closing判断他是不是为false，如果是，那么取消，取消在e那里</p>

<p>这个简单，就不放代码。</p>

<p>第二个方法，为什么我们要使用自带的按钮？其实可以在我们的控件自己写按钮</p>

<p>那么有新的问题，自己写按钮，那么怎么退出，其实我们可以使用ContentDialog的Hide()方法，这个方法可以让ContentDialog退出，是默认关闭。</p>

<p>我做到这发现，自己做的控件按钮实在有点麻烦，不如用一个简单的方法，我们在我们控件加个属性</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 对话完成，如果没有完成会继续显示</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">Complete</span>
        <span class="p">{</span>
            <span class="k">set</span><span class="p">;</span>
            <span class="k">get</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>当然在PrimaryButtonClick，如果输入和我们要的一样，<code class="language-plaintext highlighter-rouge">Complete = true;</code> SecondaryButtonClick就不需要判断<code class="language-plaintext highlighter-rouge">Complete = true;</code></p>

<p>在最后</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="k">while</span> <span class="p">(!</span><span class="err">控件</span><span class="p">.</span><span class="n">Complete</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">await</span> <span class="n">contentDialog</span><span class="p">.</span><span class="nf">ShowAsync</span><span class="p">();</span>
            <span class="p">}</span>
</code></pre></div></div>

:ET
I"G<p>在 C# 里面的指针实际上使用 int32 或 int64 存储，在 C# 里面的指针需要开启不安全代码才能使用，这里的指针是一个结构体，而结构体是存在值的</p>

<!--more-->

<!-- CreateTime:4/7/2020 8:53:00 AM -->

<p>我尝试写出 <code class="language-plaintext highlighter-rouge">byte*? foo</code> 的时候，构建的时候 VS 提示下面代码</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Error CS1519: Invalid token '?' in class, struct, or interface member declaration</span>
</code></pre></div></div>

<p>原因是 <code class="language-plaintext highlighter-rouge">byte*</code> 实际上等价一个 int32 或 int64 的结构体，看了下面代码就知道</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">byte</span><span class="p">*</span> <span class="n">foo</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
<span class="c1">// 和下面代码是等价的</span>
<span class="kt">byte</span><span class="p">*</span> <span class="n">foo</span> <span class="p">=</span> <span class="p">(</span><span class="kt">byte</span><span class="p">*)</span><span class="m">0</span><span class="p">;</span>
</code></pre></div></div>

<p>也就是此时的 <code class="language-plaintext highlighter-rouge">byte*?</code> 是不对的</p>

<p>如果要使用可空，可以使用 <code class="language-plaintext highlighter-rouge">IntPtr?</code> 代替，但是作用不大</p>

:ET